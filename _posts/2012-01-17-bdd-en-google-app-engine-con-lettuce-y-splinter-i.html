---
layout: post
title: BDD en Google App Engine con Lettuce y Splinter (I)
date: 2012-01-17 11:14:16.000000000 +01:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- gae
- google app engine
- programación
- python
- testing
tags: []
meta:
  _edit_last: '3'
author: guillermo
---
<p>Hemos de reconocerlo: tenemos mucho que aprender en lo que se refiere a programación de pruebas automáticas en la web. Hace ya bastante tiempo que veníamos usando <a title="Selenium" href="http://seleniumhq.org/" target="_blank">Selenium</a> , primero grabando las pruebas con su <a title="IDE" href="http://seleniumhq.org/projects/ide/" target="_blank">IDE</a>, más tarde programándolas con <a title="WebDriver" href="http://seleniumhq.org/docs/03_webdriver.html" target="_blank">Web Driver</a>. Pero los tests resultantes eran frágiles y aburridos de programar, por lo que sentíamos bastante envidia de los developers <strong>Ruby</strong> con su flamante <strong>Cucumber</strong> y sus elegantes tests <a title="BDD" href="http://en.wikipedia.org/wiki/Behavior_Driven_Development" target="_blank">BDD</a>.</p>
<p>Decidimos remediarlo y Julio se puso con la instalación de  <a title="Cucumber" href="http://cukes.info/" target="_blank">Cucumber</a> + <a title="Capybara" href="https://github.com/jnicklas/capybara" target="_blank">Capybara</a> en el servidor, creando un test de demo y animándonos a montar el entorno en nuestras máquinas para comenzar a darle poquito a poco. Teníamos que aprender <strong>Ruby</strong> y conocer cómo funcionan sus versiones y conceptos nuevos como <strong>RubyGems</strong>, por lo que la cosa iba a ser divertida pero no rápida y por ello se nos ocurrió darle una oportunidad a una herramienta que nos sonaba de oídas: <a title="Lettuce" href="http://packages.python.org/lettuce/tutorial/simple.html" target="_blank">Lettuce</a>, combinándola con otra herramienta bastante nueva: <a title="Slpinter" href="http://splinter.cobrateam.info/" target="_blank">Splinter</a>, de manera que, en lugar de pepinos y capibaras:<br />
<img class="alignleft" title="Pepino" src="{{ site.baseurl }}/assets/posts/Nui_Pepino_Turno.png" alt="Siempre es verano con el pepino en la mano" width="108" height="222" /></p>
<p><img class="alignleft" title="plus" src="{{ site.baseurl }}/assets/posts/plus.gif" alt="" width="197" height="181" /></p>
<p><img class="alignnone" title="Capybara" src="{{ site.baseurl }}/assets/posts/capybara_02.jpg" alt="" width="200" height="200" /></p>
<p>tendremos lechugas y poder mutante. ¡Cowabunga!</p>
<p><a href="http://joyfulchoices.com/wp-images/lettuce.gif"><img class="alignleft" title="Lechuga" src="{{ site.baseurl }}/assets/posts/lettuce.gif" alt="" width="132" height="113" /><img class="alignleft" title="plus" src="{{ site.baseurl }}/assets/posts/plus.gif" alt="" width="197" height="181" /></a></p>
<p><img class="alignnone" title="Splinter" src="{{ site.baseurl }}/assets/posts/splinter.gif" alt="" width="140" height="202" /></p>
<p><strong>Lettuce</strong> permite definir test de aceptación automáticos para proyectos <strong>Python</strong>, y <strong>Splinter</strong> proporciona un API sencilla y potente para implementar los pasos de los tests usando diferentes <strong>webDrivers</strong>.</p>
<p>De momento parece que aún falta que ambos proyectos mejoren un poco ya que son relativamente recientes. En el caso de <strong>Splinter</strong>, si no llega a darnos todo el potencial que necesitamos, siempre podemos sustituirlo por <a href="http://twill.idyll.org/python-api.html" target="_blank">twill</a>, <a href="http://seleniumhq.org/docs/appendix_installing_python_driver_client.html" target="_blank">selenium</a>, <a href="http://code.google.com/p/selenium/wiki/PythonBindings?redir=1" target="_blank">webdriver</a> o <a href="http://www.getwindmill.com/" target="_blank">windmill</a>.</p>
<p>¿Por qué usar estas herramientas quizás no tan maduras como sus homólogas del mundo <strong>Ruby</strong>? Una razón discutible - aprender un nuevo lenguaje siempre es divertido y enriquecedor - es que no nos obliga a aprender <strong>Ruby</strong> y nos permite definir los pasos en <strong>Python</strong> con el que estamos mucho más cómodos. Pero la ventaja principal es que tenemos una librería <strong>Python</strong> usada en nuestros tests de integración para crear diferentes escenarios de test en <strong>GAE</strong> y esta solución nos permite aprovechar todo su potencial instantáneamente. Bueno, eso si conseguimos instalar correctamente todo lo necesario para rular estas herramientas con <strong>GAE</strong>.</p>
<p>En <strong>Frogtek</strong> ninguno tenemos experiencia con <strong>Django</strong> más allá de su integración con <strong>Google App Engine</strong>, por lo que seguramente nos falte algo de familiaridad con ciertos conceptos que no aplican dentro de la plataforma de <strong>Google</strong>. Es quizás por esto por lo que nos encontramos con bastantes problemas de instalación y configuración que nos gustaría compartir con todos aquí. Eso será en el próximo post.</p>
